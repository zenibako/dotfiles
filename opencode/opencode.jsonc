/**
 * # PREREQUISITES:
 * - OpenCode CLI: https://opencode.ai/docs/cli/installation
 * - `npm install`
 * - Review this file and follow any inline directions in the comments.
 *
 * # INSTRUCTIONS:
 * 1. Copy this file to `~/.config/opencode/`. Remove any other `opencode.json` or `opencode.jsonc` files in that directory.
 * 2. Authenticate with Github Copilot: https://opencode.ai/docs/cli/authentication
 * 3. Run OpenCode and select the model you want to use from Github Copilot: `opencode` `/models`
 * 4. Go forth and prompt!
 */
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "Jujutsu": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "jj-mcp-server"
      ],
      "enabled": true
    },
    "GitHub": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "@modelcontextprotocol/server-github"
      ],
      "environment": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "{{github_personal_access_token}}"
      },
      "enabled": true
    },
    "GitLab": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "@modelcontextprotocol/server-gitlab"
      ],
      "environment": {
        "GITLAB_PERSONAL_ACCESS_TOKEN": "{{gitlab_personal_access_token}}",
        "GITLAB_API_URL": "{{gitlab_api_url}}"
      },
      "enabled": {{#if mcp_gitlab_enabled}}true{{else}}false{{/if}}
    },
    "Salesforce DX": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "@salesforce/mcp",
        "--orgs",
        "DEFAULT_TARGET_ORG",
        "--toolsets",
        "all",
        "--allow-non-ga-tools"
      ],
      "enabled": {{#if mcp_salesforce_enabled}}true{{else}}false{{/if}}
    },
    "Odaseva": {
      "type": "local",
      "command": [
        "oda-mcp"
      ],
      "enabled": {{#if mcp_odaseva_enabled}}true{{else}}false{{/if}},
    },
    "Atlassian": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "mcp-remote",
        "https://mcp.atlassian.com/v1/sse"
      ],
      "enabled": {{#if mcp_atlassian_enabled}}true{{else}}false{{/if}},
    },
    "Neovim": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "mcp-neovim-server"
      ],
      "environment": {
        "ALLOW_SHELL_COMMANDS": "true",
        "NVIM_SOCKET_PATH": "/tmp/nvim"
      },
      "enabled": false
    },
    "tmux": {
      "type": "local",
      "command": [
        "npx",
        "-y",
        "tmux-mcp",
        "--shell-type=nu"
      ],
      "enabled": false
    },
    "playwright": {
      "type": "local",
      "command": [
        "npx",
        "@playwright/mcp@latest"
      ],
      "enabled": false
    },
    "chrome-devtools": {
      "type": "local",
      "command": ["npx", "chrome-devtools-mcp@latest"],
      "enabled": false
    },
    "Postman": {
      "type": "remote",
      "url": "https://mcp.postman.com/mcp",
      "headers": {
        "Authorization": "Bearer {{postman_api_key}}"
      },
      "enabled": {{#if mcp_postman_enabled}}true{{else}}false{{/if}}
    },
    "SonarQube": {
      "type": "local",
      "command": [
        "docker",
        "run",
        "-i",
        "--name",
        "sonarqube-mcp-server",
        "--rm",
        "-e",
        "SONARQUBE_TOKEN",
        "-e",
        "SONARQUBE_URL",
        "mcp/sonarqube"
      ],
      "environment": {
        "SONARQUBE_URL": "{{sonarqube_url}}",
        "SONARQUBE_TOKEN": "{{sonarqube_token}}"
      },
      "enabled": {{#if mcp_sonarqube_enabled}}true{{else}}false{{/if}}
    }
  },
  "lsp": {
    "apex-language-server": {
      "command": [
        "java",
        "-cp",
        "{{apex_lsp_jar_path}}",
        "-Ddebug.internal.errors=true",
        "-Ddebug.semantic.errors=true",
        "-Ddebug.completion.statistics=false",
        "-Dlwc.typegeneration.disabled=true",
        "apex.jorje.lsp.ApexLanguageServerLauncher"
      ],
      "extensions": [
        ".apex",
        ".cls",
        ".trigger"
      ],
      "disabled": {{#if lsp_salesforce_disabled}}true{{else}}false{{/if}},
      "initialization": {
        "enableSemanticErrors": true,
        "enableCompletionStatistics": false
      }
    },
    "lwc-language-server": {
      "command": [
        "npx",
        "@salesforce/lwc-language-server",
        "--stdio"
      ],
      "extensions": [
        ".js",
        ".html"
      ],
      "disabled": {{#if lsp_salesforce_disabled}}true{{else}}false{{/if}},
    },
    "visualforce-language-server": {
      "command": [
        "$HOME/.local/share/nvim/mason/bin/visualforce-language-server",
        "--stdio"
      ],
      "extensions": [
        ".page",
        ".component"
      ],
      "disabled": {{#if lsp_salesforce_disabled}}true{{else}}false{{/if}},
    },
    "sourcekit-lsp": {
      "command": [
        "sourcekit-lsp"
      ],
      "extensions": [
        ".swift"
      ]
    },
    "cue": {
      "command": [
        "cue",
        "lsp"
      ],
      "extensions": [
        ".cue"
      ]
    },
    "typescript-language-server": {
      "command": [
        "typescript-language-server",
        "--stdio"
      ],
      "extensions": [
        ".ts",
        ".tsx",
        ".js",
        ".jsx"
      ]
    }
  },
  "provider": {
    "ollama": { // provider id
      "npm": "@ai-sdk/openai-compatible",
      "name": "Ollama",
      "options": {
        "baseURL": "http://10.0.7.73:11434/v1"
      },
      "models": {
        "qwen3-coder:latest": { // configure the model
          "name": "Qwen3 Coder"
        },
      }
    }
  }
}
